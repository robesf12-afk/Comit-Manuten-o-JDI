<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#cc0000" />
    <link rel="manifest" href="/manifest.webmanifest" />
    <title>Comitê de Manutenção JDI</title>

    <script>
      // Flags de diagnóstico visíveis na App.tsx
      window.__OS_SDK_TAG_APPENDED__ = false;
      window.__OS_SDK_LOADED__ = false;
      window.__OS_SDK_ERROR__ = null;

      // Anexa o SDK v16 com onload/onerror explícitos
      (function loadOS() {
        var s = document.createElement('script');
        s.src = "https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js";
        s.defer = true;
        s.onload = () => { window.__OS_SDK_LOADED__ = true; };
        s.onerror = (e) => { window.__OS_SDK_ERROR__ = 'Falha ao carregar SDK v16'; };
        document.head.appendChild(s);
        window.__OS_SDK_TAG_APPENDED__ = true;
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>

    <!-- Bundle Vite/React -->
    <script type="module" src="/src/main.tsx"></script>

    <!-- Registro do seu SW (opcional, mas recomendado) -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker
            .register('/sw.js', { scope: '/' })
            .catch(err => console.error('SW register error:', err));
        });
      }
    </script>
  </body>
</html>

